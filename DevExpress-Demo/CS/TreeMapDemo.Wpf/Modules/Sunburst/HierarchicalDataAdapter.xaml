<local:TreeMapDemoModule
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
    xmlns:dxtm="http://schemas.devexpress.com/winfx/2008/xaml/treemap"
    xmlns:dxtmt="http://schemas.devexpress.com/winfx/2008/xaml/treemap/themekeys"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TreeMapDemo"
    x:Class="TreeMapDemo.SunburstHierarchicalDataAdapterDemo"
    DataContext="{dxmvvm:ViewModelSource Type=local:SunburstHierarchicalDataAdapterDemoViewModel}">
    <!--#region Resources-->
    <local:TreeMapDemoModule.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="/TreeMapDemo;component/Themes/Common.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <DataTemplate
                x:Key="toolTipTemplate">
                <Grid
                    Margin="5">
                    <Grid.Resources>
                        <Style
                            TargetType="TextBlock">
                            <Setter
                                Property="Foreground"
                                Value="{DynamicResource {dxtmt:TreeMapBrushesThemeKey ResourceKey=ToolTipForeground}}" />
                        </Style>
                    </Grid.Resources>
                    <Grid.RowDefinitions>
                        <RowDefinition
                            Height="Auto" />
                        <RowDefinition
                            Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock
                        Text="{Binding Item.Namespace}"
                        FontSize="{DynamicResource {dxtmt:TreeMapBrushesThemeKey ResourceKey=ToolTipFontSize}}"
                        FontWeight="{DynamicResource {dxtmt:TreeMapBrushesThemeKey ResourceKey=ToolTipFontWeight}}" />
                    <TextBlock
                        Text="{Binding Item.Count, StringFormat='Types Count: {0}'}"
                        Grid.Row="1"
                        FontSize="{DynamicResource {dxtmt:TreeMapBrushesThemeKey ResourceKey=ToolTipFontSize}}" />
                </Grid>
            </DataTemplate>
            <dxtm:SunburstPaletteColorizer
                x:Key="paletteColorizer"
                Palette="{Binding SelectedPalette}"
                VaryColorInGroup="{Binding VaryColorInGroup}" />
            <dxtm:SunburstGroupGradientColorizer
                x:Key="gradientColorizer"
                Palette="{Binding SelectedPalette}"
                Mode="{Binding SelectedGradientColorizerMode}" />
            <dxtm:SunburstRangeColorizer
                x:Key="rangeColorizer"
                Palette="{Binding SelectedPalette}"
                RangeStops="1, 250, 500, 750, 1000, 1250, 1500, 1750" />
            <local:ColorizerConverter
                x:Key="colorizerConverter"
                PaletteColorizer="{StaticResource ResourceKey=paletteColorizer}"
                GroupGradientColorizer="{StaticResource ResourceKey=gradientColorizer}"
                RangeColorizer="{StaticResource ResourceKey=rangeColorizer}" />
        </ResourceDictionary>
    </local:TreeMapDemoModule.Resources>
    <!--#endregion-->

    <DockPanel>

        <!--#region Options-->
        <ScrollViewer
            x:Name="PART_Options"
            Style="{StaticResource optionsScrollViewerStyle}">
            <StackPanel
                Style="{StaticResource optionsRootStackPanelStyle}">
                <TextBlock
                    Text="Colorizer:" />
                <dxe:ComboBoxEdit
                    ItemsSource="{Binding Colorizers}"
                    SelectedIndex="0"
                    EditValue="{Binding SelectedColorizer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Margin="{StaticResource controlUnderTextMargin}"/>
                <TextBlock
                    Text="Palette:"
                    Margin="{StaticResource controlGroupMargin}"/>
                <dxe:ComboBoxEdit
                    ItemsSource="{Binding Palettes}"
                    EditValue="{Binding SelectedPalette, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    DisplayMember="PaletteName"
                    Margin="{StaticResource controlUnderTextMargin}" />
                <TextBlock
                    Text="Mode:"
                    Margin="{StaticResource controlGroupMargin}" />
                <dxe:ComboBoxEdit
                    IsEnabled="{DXBinding 'SelectedColorizer==`Group Gradient Colorizer`'}"
                    ItemsSource="{dxe:EnumItemsSource EnumType=dxtm:GradientColorizerMode}"
                    EditValue="{Binding SelectedGradientColorizerMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Margin="{StaticResource controlUnderTextMargin}" />
                <dxe:CheckEdit
                    IsEnabled="{DXBinding 'SelectedColorizer==`Palette Colorizer`'}"
                    Content="Vary Color in Group"
                    IsChecked="{Binding VaryColorInGroup, Mode=TwoWay}"
                    Margin="{StaticResource controlGroupMargin}"/>
            </StackPanel>
        </ScrollViewer>
        <!--#endregion-->

        <Grid>
            <dxtm:SunburstControl
                ToolTipEnabled="True"
                SelectionMode="None"
                ToolTipContentTemplate="{StaticResource ResourceKey=toolTipTemplate}"
                ToolTipGroupContentTemplate="{StaticResource ResourceKey=toolTipTemplate}"
                Colorizer="{Binding SelectedColorizer, Converter={StaticResource ResourceKey=colorizerConverter}}">
                <dxtm:SunburstControl.Titles>
                    <dxtm:Title Content="DevExpress.XtraBars Namespace Hierarchy" FontSize="25" Margin="0,10,0,0"/>
                </dxtm:SunburstControl.Titles>

                <dxtm:SunburstControl.DataAdapter>
                    <dxtm:SunburstHierarchicalDataAdapter
                        x:Name="dataAdapter"
                        DataSource="{Binding DataSource}">
                        <dxtm:SunburstHierarchicalDataAdapter.Mappings>
                            <dxtm:SunburstDataMapping
                                ValueDataMember="Count"
                                LabelDataMember="Namespace"
                                ChildrenDataMember="NestedNamespaces"
                                Type="{x:Type local:TypeInfo}" />
                        </dxtm:SunburstHierarchicalDataAdapter.Mappings>
                    </dxtm:SunburstHierarchicalDataAdapter>
                </dxtm:SunburstControl.DataAdapter>

                <dxtm:SunburstControl.ToolTipOptions>
                    <dxtm:ToolTipOptions
                        OpenMode="OnHover"
                        InitialDelay="0" />
                </dxtm:SunburstControl.ToolTipOptions>

            </dxtm:SunburstControl>

        </Grid>
    </DockPanel>
</local:TreeMapDemoModule>