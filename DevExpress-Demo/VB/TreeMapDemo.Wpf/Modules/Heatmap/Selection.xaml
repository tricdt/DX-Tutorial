<local:TreeMapDemoModule x:Class="TreeMapDemo.HeatmapSelection"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
             xmlns:dxh="http://schemas.devexpress.com/winfx/2008/xaml/heatmap"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:local="clr-namespace:TreeMapDemo"
             mc:Ignorable="d"
             x:Name="module"
             d:DesignHeight="450" d:DesignWidth="800"
             DataContext="{dxmvvm:ViewModelSource Type=local:InteractionViewModel}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <dxh:HeatmapControl x:Name="heatmap" Grid.Row="0" Margin="10" SelectionMode="Multiple"
                         SelectedItems="{Binding SelectedSales, Mode=TwoWay}" ToolTipEnabled="True">
            <dxh:HeatmapControl.ToolTipOptions>
                <dxh:HeatmapToolTipOptions Pattern="{}Month: {X}&#10;Product: {Y}&#10;Revenue: ${V}K"/>
            </dxh:HeatmapControl.ToolTipOptions>
            <dxh:HeatmapControl.Legend>
                <dxh:HeatmapLegend/>
            </dxh:HeatmapControl.Legend>
            <dxh:HeatmapControl.Titles>
                <dxc:Title Content="Sales by Month, $K" Margin="15,15,10,10"/>
            </dxh:HeatmapControl.Titles>
            <dxh:HeatmapDataSourceAdapter
                DataSource="{Binding Sales}"
                XArgumentDataMember="Month"
                YArgumentDataMember="Product"
                XArgumentComparer="{local:SaveOrderComparer}"
                ColorDataMember="RevenueByMonth"/>
            <dxh:HeatmapControl.ColorProvider>
                <dxh:HeatmapRangeColorProvider>
                    <dxh:HeatmapRangeColorProvider.RangeStops>
                        <dxh:HeatmapRangeStop Value="0" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.1" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.2" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.3" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.4" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.5" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.6" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.7" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.8" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="0.9" Type="Percentage"/>
                        <dxh:HeatmapRangeStop Value="1" Type="Percentage"/>
                    </dxh:HeatmapRangeColorProvider.RangeStops>
                    <dxh:HeatmapRangeColorProvider.Palette>
                        <dxc:CustomPalette>
                            <dxc:CustomPalette.Colors>
                                <Color>#AADE7A</Color>
                                <Color>#0072CF</Color>
                            </dxc:CustomPalette.Colors>
                        </dxc:CustomPalette>
                    </dxh:HeatmapRangeColorProvider.Palette>
                </dxh:HeatmapRangeColorProvider>
            </dxh:HeatmapControl.ColorProvider>
        </dxh:HeatmapControl>

        <dxc:ChartControl x:Name="chart" Grid.Row="1"
            DataSource="{Binding SelectedSales, Converter={local:SelectedItemsToDataSourceConverter}}" BorderBrush="Transparent">
            <dxc:ChartControl.Titles>
                <dxc:Title Content="Product Sales by Day, $K"/>
            </dxc:ChartControl.Titles>
            <dxc:ChartControl.Legend>
                <dxc:Legend/>
            </dxc:ChartControl.Legend>
            <dxc:XYDiagram2D SeriesDataMember="Product">
                <dxc:XYDiagram2D.SeriesTemplate>
                    <dxc:BarStackedSeries2D CrosshairLabelPattern="{}{S}: ${V}K" ArgumentDataMember="Date" ValueDataMember="Revenue"/>
                </dxc:XYDiagram2D.SeriesTemplate>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>
    </Grid>
</local:TreeMapDemoModule>