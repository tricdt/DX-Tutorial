<local:ChartsDemoModule
    x:Class="ChartsDemo.DateTimeScaleDemo"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ChartsDemo"
    xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
    mc:Ignorable="d"
    d:DesignHeight="450"
    d:DesignWidth="800"
    DataContext="{dxmvvm:ViewModelSource Type=local:DateTimeScaleViewModel}">
    <local:ChartsDemoModule.Resources>
        <ResourceDictionary>
            <!--#region Other resources-->
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="/ChartsDemo;component/Themes/Common.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <local:ArgumentToDateTimeMeasureUnitConverter
                x:Key="argumentToDateTimeMeasureUnitConverter" />
            <!--#endregion-->

            <!--#region ManualDateTimeScaleOptions-->
            <dxc:ManualDateTimeScaleOptions
                x:Key="manualDateTimeScaleOptions"
                AutoGrid="{Binding AutoGrid}"
                GridSpacing="{Binding GridSpacing}"
                GridAlignment="{Binding GridAlignment}"
                GridOffset="{Binding GridOffset}"
                MeasureUnit="{Binding MeasureUnit, Converter={StaticResource argumentToDateTimeMeasureUnitConverter}}"
                MeasureUnitMultiplier="{Binding MeasureUnitMultiplier}"
                WorkTimeOnly="{Binding WorkTimeOnly}"
                AggregateFunction="{Binding SelectedAggregateFunction}">
                <dxc:ManualDateTimeScaleOptions.WorkTimeRules>
                    <dxc:WorkTimeRule>
                        <dxc:WorkTimeRule.WorkIntervals>
                            <dxc:TimeInterval
                                StartHour="{Binding StartWorkHour}"
                                EndHour="{Binding EndWorkHour}" />
                        </dxc:WorkTimeRule.WorkIntervals>
                    </dxc:WorkTimeRule>
                    <dxc:WorkTimeRule
                        Weekdays="Saturday,Sunday"
                        IsActive="{Binding ExcludeWeekends}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst1}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst2}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst3}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst1}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst2}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst3}"
                        IsActive="{Binding ExcludeHolidays}" />
                </dxc:ManualDateTimeScaleOptions.WorkTimeRules>
            </dxc:ManualDateTimeScaleOptions>
            <!--#endregion-->
            <!--#region ContinuousDateTimeScaleOptions-->
            <dxc:ContinuousDateTimeScaleOptions
                x:Key="continiousDateTimeScaleOptions"
                AutoGrid="{Binding AutoGrid}"
                GridSpacing="{Binding GridSpacing}"
                GridAlignment="{Binding GridAlignment}"
                GridOffset="{Binding GridOffset}" />
            <!--#endregion-->
            <!--#region AutomaticDateTimeScaleOptions-->
            <dxc:AutomaticDateTimeScaleOptions
                AggregateFunction="{Binding SelectedAggregateFunction}"
                WorkTimeOnly="{Binding WorkTimeOnly}"
                x:Key="automaticDateTimeScaleOptions">
                <dxc:AutomaticDateTimeScaleOptions.WorkTimeRules>
                    <dxc:WorkTimeRule>
                        <dxc:WorkTimeRule.WorkIntervals>
                            <dxc:TimeInterval
                                StartHour="{Binding StartWorkHour}"
                                EndHour="{Binding EndWorkHour}" />
                        </dxc:WorkTimeRule.WorkIntervals>
                    </dxc:WorkTimeRule>
                    <dxc:WorkTimeRule
                        Weekdays="Saturday,Sunday"
                        IsActive="{Binding ExcludeWeekends}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst1}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst2}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding MayFirst3}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst1}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst2}"
                        IsActive="{Binding ExcludeHolidays}" />
                    <dxc:WorkTimeRule
                        Date="{Binding JanuaryFirst3}"
                        IsActive="{Binding ExcludeHolidays}" />
                </dxc:AutomaticDateTimeScaleOptions.WorkTimeRules>
            </dxc:AutomaticDateTimeScaleOptions>
            <!--#endregion-->
            <local:ScaleModeToScaleOptionsConverter
                x:Key="scaleModeToScaleOptionsConverter"
                AutomaticDateTimeScaleOptions="{StaticResource automaticDateTimeScaleOptions}"
                ManualDateTimeScaleOptions="{StaticResource manualDateTimeScaleOptions}"
                ContinuousDateTimeScaleOptions="{StaticResource continiousDateTimeScaleOptions}" />
        </ResourceDictionary>
    </local:ChartsDemoModule.Resources>

    <DockPanel>
        <!--#region Options-->
        <ScrollViewer
            Name="PART_Options"
            Style="{StaticResource optionsScrollViewerStyle}">
            <StackPanel
                Style="{StaticResource optionsRootStackPanelStyle}">
                <GroupBox
                    Header="View">
                    <dxe:ComboBoxEdit
                        EditValue="{Binding SelectedSeries, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding Series}"
                        EditValueChanged="{DXEvent @e(chart).Animate()}" />
                </GroupBox>
                <GroupBox
                    Header="Scale">
                    <StackPanel>
                        <TextBlock
                            Text="Scale Mode:" />
                        <dxe:ComboBoxEdit
                            Margin="{StaticResource textUnderControlMargin}"
                            ItemsSource="{dxe:EnumItemsSource EnumType=dxc:ScaleMode}"
                            EditValue="{Binding ScaleMode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock
                            Text="Measurement Unit:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:ComboBoxEdit
                            Margin="{StaticResource textUnderControlMargin}"
                            ItemsSource="{dxe:EnumItemsSource EnumType=local:ArgumentMeasureUnit}"
                            EditValue="{Binding MeasureUnit, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            IsEnabled="{Binding ScaleOptionsEnabled}" />
                        <TextBlock
                            Text="Unit Multiplier:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="1"
                            MaxValue="50"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding MeasureUnitMultiplier, Mode=TwoWay}"
                            IsEnabled="{Binding ScaleOptionsEnabled}" />
                        <TextBlock
                            Text="Aggregate Function:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:ComboBoxEdit
                            Margin="{StaticResource textUnderControlMargin}"
                            ItemsSource="{Binding AggregateFunctions}"
                            EditValue="{Binding SelectedAggregateFunction, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </GroupBox>
                <GroupBox
                    Header="Grid">
                    <StackPanel>
                        <dxe:CheckEdit
                            IsChecked="{Binding AutoGrid, Mode=TwoWay}"
                            Content="Auto Grid"
                            IsEnabled="{Binding GridOptionsEnabled}" />
                        <TextBlock
                            Text="Grid Alignment:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:ComboBoxEdit
                            Margin="{StaticResource textUnderControlMargin}"
                            ItemsSource="{Binding GridAlignments}"
                            EditValue="{Binding GridAlignment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            IsEnabled="{DXBinding '!@c.AutoGrid'}" />
                        <TextBlock
                            Text="Grid Spacing:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="1"
                            MaxValue="50"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding GridSpacing, Mode=TwoWay}"
                            IsEnabled="{DXBinding '!@c.AutoGrid'}"
                            DisplayFormatString="{DXBinding '`0 `+@c.GridAlignment.ToString().ToLower() + `(s)`'}" />
                        <TextBlock
                            Text="Grid Offset:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="-50"
                            MaxValue="50"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding GridOffset, Mode=TwoWay}"
                            IsEnabled="{DXBinding '!@c.AutoGrid'}"
                            DisplayFormatString="{DXBinding '`0 `+@c.GridAlignment.ToString().ToLower() + `(s)`'}" />
                        <TextBlock
                            Text="Minor Tickmarks Count:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="1"
                            MaxValue="15"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding MinorTickmarksCount, Mode=TwoWay}" />
                    </StackPanel>
                </GroupBox>
                <GroupBox
                    Header="Work Time Options">
                    <StackPanel>
                        <dxe:CheckEdit
                            IsChecked="{Binding WorkTimeOnly}"
                            Content="Work Time Only"
                            IsEnabled="{Binding WorkdaysOptionsEnabled}" />
                        <TextBlock
                            Text="Start Work Hour:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="0"
                            MaxValue="11"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding StartWorkHour, Mode=TwoWay}"
                            DisplayFormatString="0:\0\0"
                            IsEnabled="{DXBinding '@c.WorkTimeOptionsEnabled and @c.WorkTimeOnly'}" />
                        <TextBlock
                            Text="End Work Hour:"
                            Margin="{StaticResource optionsGroupTopMargin}" />
                        <dxe:SpinEdit
                            MinValue="12"
                            MaxValue="23"
                            Margin="{StaticResource textUnderControlMargin}"
                            Value="{Binding EndWorkHour, Mode=TwoWay}"
                            IsEnabled="{DXBinding '@c.WorkTimeOptionsEnabled and @c.WorkTimeOnly'}"
                            DisplayFormatString="0:\0\0" />
                        <dxe:CheckEdit
                            IsChecked="{Binding ExcludeWeekends}"
                            IsEnabled="{DXBinding '@c.WorkdaysOptionsEnabled and @c.WorkTimeOnly'}"
                            Margin="{StaticResource optionsGroupTopMargin}"
                            Content="Exclude Weekends"
                            ToolTip="Exclude Saturdays and Sundays" />
                        <dxe:CheckEdit
                            IsChecked="{Binding ExcludeHolidays}"
                            IsEnabled="{DXBinding '@c.WorkdaysOptionsEnabled and @c.WorkTimeOnly'}"
                            Margin="{StaticResource optionsGroupTopMargin}"
                            Content="Exclude Holidays"
                            ToolTip="Exclude 1 January and 1 May" />
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
        <!--#endregion-->

        <dxc:ChartControl
            x:Name="chart"
            DataSource="{Binding DataSource}"
            AxisScaleChanged="{DXEvent Handler='@c.OnScaleChanged(@args)'}"
            AnimationMode="OnLoad">
            <!--#region Titles-->
            <dxc:ChartControl.Titles>
                <dxc:Title
                    Content="{Binding Title}"
                    HorizontalAlignment="Center" />
            </dxc:ChartControl.Titles>
            <!--#endregion-->
            <dxc:XYDiagram2D
                EnableAxisXNavigation="True"
                SeriesItemsSource="{Binding Series}"
                DependentAxesYRange="True">
                <!--#region Series Source-->
                <dxc:XYDiagram2D.SeriesItemTemplateSelector>
                    <local:DateTimeScaleSeriesTemplateSelector>
                        <local:DateTimeScaleSeriesTemplateSelector.BarSeriesTemplate>
                            <DataTemplate>
                                <dxc:BarSideBySideSeries2D
                                    ArgumentDataMember="DateTimeStamp"
                                    ValueDataMember="Volume"
                                    Visible="{Binding Visible}"
                                    AnimationAutoStartMode="SetStartState">
                                    <dxc:BarSideBySideSeries2D.PointAnimation>
                                        <dxc:Bar2DGrowUpAnimation
                                            PointDelay="0:0:0.01" />
                                    </dxc:BarSideBySideSeries2D.PointAnimation>
                                </dxc:BarSideBySideSeries2D>
                            </DataTemplate>
                        </local:DateTimeScaleSeriesTemplateSelector.BarSeriesTemplate>
                        <local:DateTimeScaleSeriesTemplateSelector.StockSeriesTemplate>
                            <DataTemplate>
                                <dxc:StockSeries2D
                                    ArgumentDataMember="DateTimeStamp" DataSourceSorted="True"
                                    HighValueDataMember="High"
                                    LowValueDataMember="Low"
                                    OpenValueDataMember="Open"
                                    CloseValueDataMember="Close"
                                    Visible="{Binding Visible}"
                                    AnimationAutoStartMode="SetStartState">
                                    <dxc:StockSeries2D.PointAnimation>
                                        <dxc:Stock2DExpandAnimation
                                            PointDelay="0" />
                                    </dxc:StockSeries2D.PointAnimation>
                                </dxc:StockSeries2D>
                            </DataTemplate>
                        </local:DateTimeScaleSeriesTemplateSelector.StockSeriesTemplate>
                    </local:DateTimeScaleSeriesTemplateSelector>
                </dxc:XYDiagram2D.SeriesItemTemplateSelector>
                <!--#endregion-->
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D
                        DateTimeScaleOptions="{Binding ScaleMode, Converter={StaticResource scaleModeToScaleOptionsConverter}}"
                        MinorCount="{Binding MinorTickmarksCount}">
                        <!--#region Ranges-->
                        <dxc:AxisX2D.WholeRange>
                            <dxc:Range
                                SideMarginsValue="1" />
                        </dxc:AxisX2D.WholeRange>
                        <dxc:AxisX2D.VisualRange>
                            <dxc:Range
                                MinValue="{Binding VisualRangeMin}"
                                MaxValue="{Binding VisualRangeMax}" />
                        </dxc:AxisX2D.VisualRange>
                        <!--#endregion-->
                    </dxc:AxisX2D>
                </dxc:XYDiagram2D.AxisX>
                <!--#region AxisY-->
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D>
                        <dxc:AxisY2D.WholeRange>
                            <dxc:Range
                                dxc:AxisY2D.AlwaysShowZeroLevel="False" />
                        </dxc:AxisY2D.WholeRange>
                        <dxc:AxisY2D.Title>
                            <dxc:AxisTitle
                                Content="United States Dollars" />
                        </dxc:AxisY2D.Title>
                    </dxc:AxisY2D>
                </dxc:XYDiagram2D.AxisY>
                <!--#endregion-->
                <!--#region NavigationOptions-->
                <dxc:XYDiagram2D.NavigationOptions>
                    <dxc:NavigationOptions
                        AxisXMaxZoomPercent="40000" />
                </dxc:XYDiagram2D.NavigationOptions>
                <!--#endregion-->
            </dxc:XYDiagram2D>
        </dxc:ChartControl>

    </DockPanel>
</local:ChartsDemoModule>